# 面试题64. 求1+2+…+n
求 1+2+...+n ，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句（A?B:C）。

**示例1：**
```
输入: n = 3
输出: 6
```
**示例2：**
```
输入: n = 9
输出: 45
```
**限制**
```
1 <= n <= 10000
```
# 题解
这题要求我们不能使用乘除法、for、while、if、else、switch、case 等关键字及条件判断语句，因此我们手里能用的工具很少，列举出来发现只有加减法，赋值，位运算符以及逻辑运算符。
## 方法1：递归 + 逻辑运算符
不让用循环，于是用递归代替。不让用条件判断语句，于是用逻辑运算符代替。

递归的出口用逻辑运算符进行判断。

## 方法2：快速乘
在本题中，通过高斯定理可以知道答案是`n(n+1)/2`。除2操作可以用右移替代。那剩下的就是乘法操作的转换。

利用俄罗斯民间乘法将两数的**相乘操作**转化为**位运算和加法**。

因此，可以得到如下代码：
```js
/**
 * @param {number} n
 * @return {number}
 */
var sumNums = function(n) {
    // n(n+1)/2
    let A = n, B = n+1, res = 0;
    for(;B;B >>= 1) {   // B首先会除2一次，因此最后res不再除2
        if(B & 1) {
            A <<= 1;
            res += A;
        }
    }
    return res;
};
```

但本题不允许使用循环语句，因此将循环手动展开。本题中`1 <= n <= 10000`，所以 n 二进制展开最多不会超过 14 位，我们手动展开 14 层代替循环即可。

## 方法3：直接套公式
本题其实就是计算`n(n+1)/2`。

题目要求不能用乘法，于是这里用幂。

`n(n+1)/2 = (n^2 + n) / 2`

根据提交结果来看，这种方法是上述所有方法中最快的。